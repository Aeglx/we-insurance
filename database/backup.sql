CREATE TABLE `business` (
  `id` int NOT NULL AUTO_INCREMENT,
  `agent_id` int NOT NULL,
  `underwriter_id` int DEFAULT NULL,
  `insurance_id` int NOT NULL,
  `customer_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `customer_phone` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `customer_email` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `policy_number` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `premium_amount` decimal(10,2) NOT NULL,
  `coverage_amount` decimal(15,2) NOT NULL,
  `start_date` datetime NOT NULL,
  `end_date` datetime NOT NULL,
  `status` enum('pending','approved','rejected','expired') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending',
  `inquiry_date` datetime DEFAULT NULL,
  `approval_date` datetime DEFAULT NULL,
  `remarks` text COLLATE utf8mb4_unicode_ci,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `deleted_at` datetime DEFAULT NULL,
  `client_type` enum('personal','company','vehicle') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'personal',
  `personal_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `company_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `plate_number` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `insurance_type_id` int DEFAULT NULL,
  `specific_insurance_id` int DEFAULT NULL,
  `inquiry_amount` decimal(10,2) DEFAULT NULL,
  `deal_status` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT 'pending',
  `reminder_time` datetime DEFAULT NULL,
  `deal_time` datetime DEFAULT NULL,
  `follow_up_remark` text COLLATE utf8mb4_unicode_ci,
  PRIMARY KEY (`id`),
  UNIQUE KEY `policy_number` (`policy_number`),
  UNIQUE KEY `policy_number_2` (`policy_number`),
  UNIQUE KEY `policy_number_3` (`policy_number`),
  UNIQUE KEY `policy_number_4` (`policy_number`),
  UNIQUE KEY `policy_number_5` (`policy_number`),
  UNIQUE KEY `policy_number_6` (`policy_number`),
  UNIQUE KEY `policy_number_7` (`policy_number`),
  UNIQUE KEY `policy_number_8` (`policy_number`),
  UNIQUE KEY `policy_number_9` (`policy_number`),
  UNIQUE KEY `policy_number_10` (`policy_number`),
  UNIQUE KEY `policy_number_11` (`policy_number`),
  KEY `agent_id` (`agent_id`),
  KEY `underwriter_id` (`underwriter_id`),
  KEY `insurance_id` (`insurance_id`),
  KEY `insurance_type_id` (`insurance_type_id`),
  KEY `specific_insurance_id` (`specific_insurance_id`),
  CONSTRAINT `business_ibfk_47` FOREIGN KEY (`agent_id`) REFERENCES `user` (`id`) ON UPDATE CASCADE,
  CONSTRAINT `business_ibfk_48` FOREIGN KEY (`underwriter_id`) REFERENCES `user` (`id`) ON UPDATE CASCADE,
  CONSTRAINT `business_ibfk_49` FOREIGN KEY (`insurance_id`) REFERENCES `insurance` (`id`) ON UPDATE CASCADE,
  CONSTRAINT `business_ibfk_50` FOREIGN KEY (`insurance_type_id`) REFERENCES `insurance_category` (`id`) ON UPDATE CASCADE,
  CONSTRAINT `business_ibfk_51` FOREIGN KEY (`specific_insurance_id`) REFERENCES `insurance` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE `business_level` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` text COLLATE utf8mb4_unicode_ci,
  `status` tinyint(1) NOT NULL DEFAULT '1',
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`),
  UNIQUE KEY `name_2` (`name`),
  UNIQUE KEY `name_3` (`name`),
  UNIQUE KEY `name_4` (`name`),
  UNIQUE KEY `name_5` (`name`),
  UNIQUE KEY `name_6` (`name`),
  UNIQUE KEY `name_7` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `business_level` (`id`, `name`, `description`, `status`, `created_at`, `updated_at`) VALUES (1, '一级业务', '最高级别业务，保费高，风险大', 1, '2025-12-03 08:42:19', '2025-12-03 08:42:19'), (2, '二级业务', '中级业务，保费中等，风险中等', 1, '2025-12-03 08:42:19', '2025-12-03 08:42:19'), (3, '三级业务', '初级业务，保费低，风险小', 1, '2025-12-03 08:42:19', '2025-12-03 08:42:19');

CREATE TABLE `insurance` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `code` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `category_id` int NOT NULL,
  `description` text COLLATE utf8mb4_unicode_ci,
  `status` tinyint(1) DEFAULT '1',
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `code` (`code`),
  UNIQUE KEY `code_2` (`code`),
  UNIQUE KEY `code_3` (`code`),
  UNIQUE KEY `code_4` (`code`),
  UNIQUE KEY `code_5` (`code`),
  UNIQUE KEY `code_6` (`code`),
  UNIQUE KEY `code_7` (`code`),
  UNIQUE KEY `code_8` (`code`),
  UNIQUE KEY `code_9` (`code`),
  UNIQUE KEY `code_10` (`code`),
  UNIQUE KEY `code_11` (`code`),
  UNIQUE KEY `code_12` (`code`),
  UNIQUE KEY `code_13` (`code`),
  UNIQUE KEY `code_14` (`code`),
  UNIQUE KEY `code_15` (`code`),
  KEY `category_id` (`category_id`),
  CONSTRAINT `insurance_ibfk_1` FOREIGN KEY (`category_id`) REFERENCES `insurance_category` (`id`) ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=53 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `insurance` (`id`, `name`, `code`, `category_id`, `description`, `status`, `created_at`, `updated_at`) VALUES (1, '平安出行守护保2.0（互联网）', 'INS1764774246272678', 1, '', 1, '2025-12-03 07:04:17', '2025-12-03 07:04:17'), (2, '平安意外险（1-4类）', 'INS1764774259433627', 1, '', 1, '2025-12-03 07:04:27', '2025-12-03 07:04:27'), (3, '平安意外险（1-3类）', 'INS1764774269183608', 1, '', 1, '2025-12-03 07:04:38', '2025-12-03 07:04:38'), (4, '平安全民意外险1-6类', 'INS1764774290416016', 1, '', 1, '2025-12-03 07:04:54', '2025-12-03 07:04:54'), (5, '平安骑行运动保（1-30天•及时版）', 'INS1764774306247651', 1, '', 1, '2025-12-03 07:05:28', '2025-12-03 07:05:28'), (6, '平安骑行运动保（1-30天•互联网版）', 'INS1764774337345037', 1, '', 1, '2025-12-03 07:05:46', '2025-12-03 07:05:46'), (7, '平安短期意外险（1-30天）', 'INS1764774348015609', 1, '', 1, '2025-12-03 07:05:55', '2025-12-03 07:05:55'), (8, '平安短期意外险猝死版（1-30天）', 'INS1764774356386463', 1, '', 1, '2025-12-03 07:06:02', '2025-12-03 07:06:02'), (9, '平安孝心老人意外险', 'INS1764774367021726', 1, '', 1, '2025-12-03 07:06:09', '2025-12-03 07:06:09'), (10, '平安意外险1-5类（打折版）', 'INS1764774370484752', 1, '', 1, '2025-12-03 07:06:16', '2025-12-03 07:06:16'), (11, '平安出行百万意外（互联网）', 'INS1764774383866807', 1, '', 1, '2025-12-03 07:06:28', '2025-12-03 07:06:28'), (12, '平安意外险1-4类（家财版）', 'INS1764774394219438', 1, '', 1, '2025-12-03 07:06:36', '2025-12-03 07:06:36'), (13, '平安意外险1-4类（家财版）', 'INS1764774403609422', 1, '', 1, '2025-12-03 07:06:47', '2025-12-03 07:06:47'), (14, '平安防护符少儿意外险 ', 'INS1764774439076073', 1, '', 1, '2025-12-03 07:07:21', '2025-12-03 07:07:21'), (15, '平安惠农意外险（家庭版）', 'INS1764774446075885', 1, '', 1, '2025-12-03 07:07:28', '2025-12-03 07:07:28'), (16, '安盛卓越宝贝少儿意外险2022（互联网专属）', 'INS1764774454418419', 1, '', 1, '2025-12-03 07:07:37', '2025-12-03 07:07:37'), (17, '平安短期司机意外险（网约司机版）', 'INS1764774462425341', 1, '', 1, '2025-12-03 07:07:44', '2025-12-03 07:07:44'), (18, '安诚大护法1-4类意外险', 'INS1764774469362502', 1, '', 1, '2025-12-03 07:07:51', '2025-12-03 07:07:51'), (19, '安盛天平-卓越守护百万住院医疗2022', 'INS1764774475953126', 1, '', 1, '2025-12-03 07:07:58', '2025-12-03 07:07:58'), (20, '安盛天平-卓越守护百万住院医疗2022升级版', 'INS1764774488587709', 1, '', 1, '2025-12-03 07:08:11', '2025-12-03 07:08:11'), (21, '泰慧保·百万医疗（尊选版）', 'INS1764774496335071', 1, '', 1, '2025-12-03 07:08:19', '2025-12-03 07:08:19'), (22, '平安非机动车保险（两轮非营运）', 'INS1764774514762695', 1, '', 1, '2025-12-03 07:08:37', '2025-12-03 07:08:37'), (23, '平安守护·老年人意外险', 'INS1764774521074833', 1, '', 1, '2025-12-03 07:08:43', '2025-12-03 07:08:43'), (24, '太平洋个人意外伤害医疗', 'INS1764774527742113', 1, '', 1, '2025-12-03 07:08:50', '2025-12-03 07:08:50'), (25, '平安一年期运动意外险（猝死组合版）-L', 'INS1764774551244541', 19, '', 1, '2025-12-03 07:09:16', '2025-12-03 07:09:16'), (26, '平安短期运动意外险（1-30天）', 'INS1764774562105488', 19, '', 1, '2025-12-03 07:09:25', '2025-12-03 07:09:25'), (27, '平安高风险运动意外险（境内版）', 'INS1764774570616815', 19, '', 1, '2025-12-03 07:09:34', '2025-12-03 07:09:34'), (28, '平安短期运动意外险猝死版（1-30天）', 'INS1764774580026434', 19, '', 1, '2025-12-03 07:09:43', '2025-12-03 07:09:43'), (29, '平安小车驾乘安心保-100', 'INS1764774600673349', 20, '', 1, '2025-12-03 07:10:04', '2025-12-03 07:10:04'), (30, '平安境内旅游险（九州版）', 'INS1764774611877534', 22, '', 1, '2025-12-03 07:10:21', '2025-12-03 07:10:21'), (31, '平安旅游险特惠版（含境内外）', 'INS1764774622480244', 22, '', 1, '2025-12-03 07:10:29', '2025-12-03 07:10:29'), (32, '平安全球旅游险（尊享版）', 'INS1764774634273185', 22, '', 1, '2025-12-03 07:10:37', '2025-12-03 07:10:37'), (33, '平安 “活动畅心” 境内旅行意外险', 'INS1764774643144460', 22, '', 1, '2025-12-03 07:10:46', '2025-12-03 07:10:46'), (34, '平安E生平安·百万医疗险（专享版）', 'INS1764774669382357', 30, '', 1, '2025-12-03 07:11:12', '2025-12-03 07:11:12'), (35, '小幸孕-京东安联母婴保障计划', 'INS1764774695000617', 31, '', 1, '2025-12-03 07:11:38', '2025-12-03 07:11:38'), (36, '平安E生平安·百万医疗险（专享版）', 'INS1764774705745631', 31, '', 1, '2025-12-03 07:11:48', '2025-12-03 07:11:48'), (37, '平安铂金百万综合意外险', 'INS1764774714943894', 31, '', 1, '2025-12-03 07:11:58', '2025-12-03 07:11:58'), (38, '平安星曜少儿百万意外险', 'INS1764774723219741', 31, '', 1, '2025-12-03 07:12:06', '2025-12-03 07:12:06'), (39, '泰爱保·百万医疗险（慢病版）', 'INS1764774731287516', 31, '', 1, '2025-12-03 07:12:13', '2025-12-03 07:12:13'), (40, '京东安联臻爱百万医疗保险-专业版', 'INS1764774739180983', 31, '', 1, '2025-12-03 07:12:22', '2025-12-03 07:12:22'), (41, '安盛家政人员综合意外险2.0（互联网专属）', 'INS1764774749418169', 31, '', 1, '2025-12-03 07:12:32', '2025-12-03 07:12:32'), (42, '平安悦享逸家-服务家财险（互联网版）', 'INS1764774759739097', 5, '', 1, '2025-12-03 07:12:49', '2025-12-03 07:12:49'), (43, '平安骑行置换保（互联网）', 'INS1764774770032186', 5, '', 1, '2025-12-03 07:12:58', '2025-12-03 07:12:58'), (44, '众安任我学·学平险（升级版）', 'INS1764774785250062', 6, '', 1, '2025-12-03 07:13:16', '2025-12-03 07:13:16'), (45, '紫金“快乐之星”学平险', 'INS1764774801721135', 6, '', 1, '2025-12-03 07:13:25', '2025-12-03 07:13:25'), (46, '紫金“希望之星”学平险', 'INS1764774810433586', 6, '', 1, '2025-12-03 07:13:33', '2025-12-03 07:13:33'), (47, '平安学平险6-25岁（特惠版）', 'INS1764774818960638', 6, '', 1, '2025-12-03 07:13:43', '2025-12-03 07:13:43'), (48, '紫金医疗机构责任险', 'INS1764774836418289', 26, '', 1, '2025-12-03 07:14:01', '2025-12-03 07:14:01'), (49, '平安个人医护守护保（医生版）', 'INS1764774847123741', 26, '', 1, '2025-12-03 07:14:10', '2025-12-03 07:14:10'), (50, '平安个人医护守护保（护士版）', 'INS1764774856064312', 26, '', 1, '2025-12-03 07:14:19', '2025-12-03 07:14:19'), (51, '太平洋个人法律责任（医护版）', 'INS1764774864436881', 26, '', 1, '2025-12-03 07:14:28', '2025-12-03 07:14:28'), (52, '平安无忧团意险1-5类A款（高保额版）', 'INS1764774877597313', 2, '', 1, '2025-12-03 07:14:41', '2025-12-03 07:14:41');

CREATE TABLE `insurance_category` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`),
  UNIQUE KEY `name_2` (`name`),
  UNIQUE KEY `name_3` (`name`),
  UNIQUE KEY `name_4` (`name`),
  UNIQUE KEY `name_5` (`name`),
  UNIQUE KEY `name_6` (`name`),
  UNIQUE KEY `name_7` (`name`),
  UNIQUE KEY `name_8` (`name`),
  UNIQUE KEY `name_9` (`name`),
  UNIQUE KEY `name_10` (`name`),
  UNIQUE KEY `name_11` (`name`),
  UNIQUE KEY `name_12` (`name`),
  UNIQUE KEY `name_13` (`name`),
  UNIQUE KEY `name_14` (`name`),
  UNIQUE KEY `name_15` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=36 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `insurance_category` (`id`, `name`, `created_at`, `updated_at`) VALUES (1, '个人意外险', '2025-12-03 05:49:13', '2025-12-03 05:49:13'), (2, '团体意外险', '2025-12-03 05:49:13', '2025-12-03 05:49:13'), (3, '健康险', '2025-12-03 05:49:13', '2025-12-03 05:49:13'), (5, '财产险', '2025-12-03 05:49:13', '2025-12-03 05:49:13'), (6, '学平险', '2025-12-03 05:49:13', '2025-12-03 05:49:13'), (19, '运动险', '2025-12-03 06:47:51', '2025-12-03 06:47:51'), (20, '驾乘险', '2025-12-03 06:47:57', '2025-12-03 06:47:57'), (21, '超赔险', '2025-12-03 06:48:04', '2025-12-03 06:48:04'), (22, '旅游险', '2025-12-03 06:48:12', '2025-12-03 06:48:12'), (26, '责任险', '2025-12-03 07:03:10', '2025-12-03 07:03:10'), (28, '团体雇主险', '2025-12-03 07:03:22', '2025-12-03 07:03:22'), (29, '随车雇主', '2025-12-03 07:03:27', '2025-12-03 07:03:27'), (30, '百万医疗', '2025-12-03 07:03:56', '2025-12-03 07:03:56'), (31, '医疗险', '2025-12-03 07:11:32', '2025-12-03 07:11:32'), (32, '建工团意', '2025-12-03 07:16:12', '2025-12-03 07:16:12'), (33, '建工安责', '2025-12-03 07:16:23', '2025-12-03 07:16:23'), (34, '建工一切', '2025-12-03 07:16:29', '2025-12-03 07:16:29'), (35, '诉责保全', '2025-12-03 07:16:38', '2025-12-03 07:16:38');

CREATE TABLE `user` (
  `id` int NOT NULL AUTO_INCREMENT,
  `username` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `password` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `role` enum('admin','agent','underwriter') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'agent',
  `email` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `phone` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `department` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `status` tinyint(1) DEFAULT '1',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `deleted_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  UNIQUE KEY `username_2` (`username`),
  UNIQUE KEY `username_3` (`username`),
  UNIQUE KEY `username_4` (`username`),
  UNIQUE KEY `username_5` (`username`),
  UNIQUE KEY `username_6` (`username`),
  UNIQUE KEY `username_7` (`username`),
  UNIQUE KEY `username_8` (`username`),
  UNIQUE KEY `username_9` (`username`),
  UNIQUE KEY `username_10` (`username`),
  UNIQUE KEY `username_11` (`username`),
  UNIQUE KEY `username_12` (`username`),
  UNIQUE KEY `username_13` (`username`),
  UNIQUE KEY `username_14` (`username`),
  UNIQUE KEY `username_15` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `user` (`id`, `username`, `password`, `name`, `role`, `email`, `phone`, `department`, `status`, `created_at`, `updated_at`, `deleted_at`) VALUES (1, 'admin', 'admin123', '系统管理员', 'admin', 'admin@example.com', '13800138000', NULL, 1, '2025-12-03 05:49:13', '2025-12-03 05:49:13', NULL);

